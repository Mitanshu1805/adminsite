"use strict";(self.webpackChunkadminto_react=self.webpackChunkadminto_react||[]).push([[1288],{15468:function(e,t,n){n(72791);var a=n(95316),i=n(43360),r=n(80184);t.Z=function(e){var t=e.show,n=e.onClose,s=e.onConfirm,l=e.title,o=void 0===l?"Confirm Deletion":l,c=e.message,d=void 0===c?"Are you sure you want to delete this item?":c;return(0,r.jsxs)(a.Z,{show:t,onHide:n,centered:!0,children:[(0,r.jsx)(a.Z.Header,{closeButton:!0,children:(0,r.jsx)(a.Z.Title,{children:o})}),(0,r.jsx)(a.Z.Body,{children:(0,r.jsx)("p",{children:d})}),(0,r.jsxs)(a.Z.Footer,{children:[(0,r.jsx)(i.Z,{variant:"secondary",onClick:n,children:"Cancel"}),(0,r.jsx)(i.Z,{variant:"danger",onClick:s,children:"Delete"})]})]})}},31187:function(e,t,n){var a=n(29439),i=n(72791),r=n(21827),s=n(89743),l=n(2677),o=n(80184);t.Z=function(){var e=(0,i.useState)(!0),t=(0,a.Z)(e,2),n=t[0],c=t[1];return(0,o.jsx)(s.Z,{className:"mb-4",children:(0,o.jsx)(l.Z,{md:6,children:(0,o.jsxs)(r.Z.Group,{children:[(0,o.jsx)(r.Z.Label,{style:{fontSize:"1.5rem",fontWeight:"bold"},children:"Master Outlet"}),(0,o.jsxs)("div",{className:"d-flex align-items-center",children:[(0,o.jsx)(r.Z.Check,{type:"checkbox",checked:n,onChange:function(){return c(!0)},id:"master-checkbox",style:{transform:"scale(1.2)",marginRight:"8px"}}),(0,o.jsx)(r.Z.Label,{htmlFor:"master-checkbox",style:{fontSize:"1.3rem",marginBottom:"0"},children:"Master"})]})]})})})}},66252:function(e,t,n){n.d(t,{h:function(){return r}});var a=n(29439),i=n(72791);function r(e){var t=(0,i.useState)(0),n=(0,a.Z)(t,2),r=n[0],s=n[1];return{currentStepIndex:r,step:e[r],steps:e,isFirstStep:0===r,isLastStep:r===e.length-1,goTo:function(e){s(e)},next:function(){s((function(t){return t>=e.length-1?t:t+1}))},back:function(){s((function(e){return e<=0?e:e-1}))}}}},92414:function(e,t,n){n.r(t),n.d(t,{default:function(){return _}});var a=n(4942),i=n(1413),r=n(29439),s=n(72791),l=n(57689),o=n(15671),c=n(43144),d=n(60136),u=n(29388),m=n(80184),h=function(e){(0,d.Z)(n,e);var t=(0,u.Z)(n);function n(){var e;(0,o.Z)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).state={hasError:!1},e}return(0,c.Z)(n,[{key:"componentDidCatch",value:function(e,t){console.error("Error caught by Error Boundary:",e,t)}},{key:"render",value:function(){return this.state.hasError?(0,m.jsx)("h1",{children:"Something went wrong."}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(){return{hasError:!0}}}]),n}(s.Component),p=h,g=n(6901),x=n(85906),y=n(51649),v=n(59135),f=(n(99944),n(91555)),Z=n(15468),j=function(){var e,t=null===(e=(0,l.TH)().state)||void 0===e?void 0:e.business_id,n=(0,y.Sc)(),o=n.dispatch,c=n.appSelector,d=(0,s.useState)({}),u=(0,r.Z)(d,2),h=u[0],p=u[1],j=(0,s.useState)(!1),_=(0,r.Z)(j,2),b=(_[0],_[1],(0,s.useState)(!1)),C=(0,r.Z)(b,2),N=(C[0],C[1],(0,s.useState)(null)),S=(0,r.Z)(N,2),k=(S[0],S[1],(0,s.useState)("")),w=(0,r.Z)(k,2),E=(w[0],w[1]),q=c((function(e){return e.category.categories||[]})),P=(0,s.useState)(null),I=(0,r.Z)(P,2),L=I[0],O=I[1],T=(0,s.useState)(null),D=(0,r.Z)(T,2),A=D[0],F=D[1],R=(0,s.useState)(!1),B=(0,r.Z)(R,2),H=B[0],G=B[1],M=(0,s.useState)(null),Q=(0,r.Z)(M,2),z=Q[0],U=Q[1],$=(0,s.useState)(!1),V=(0,r.Z)($,2),J=V[0],W=V[1],Y=(0,l.s0)();(0,s.useEffect)((function(){t&&o((0,g.m$)(t))}),[o,t]),(0,s.useEffect)((function(){q.length>0&&!L&&O(q[0].category_id)}),[q,L]),(0,s.useEffect)((function(){if(q.length>0){var e={};q.forEach((function(t){e[t.category_id]=t.is_active,t.items.forEach((function(t){e[t.item_id]=t.is_active}))})),p(e)}}),[q]);var X=function(){z&&o((0,x.wz)(z)),setTimeout((function(){o((0,g.m$)(t))}),500),W(!1)},K=function(){A&&o((0,g.uu)(A)),setTimeout((function(){o((0,g.m$)(t))}),500),G(!1)},ee=q.filter((function(e){return!L||e.category_id===L})).flatMap((function(e){return e.items}));return console.log("Filtered Items:",ee),(0,m.jsxs)("div",{className:"manage-menu-container",children:[(0,m.jsxs)("div",{className:"header",children:[(0,m.jsx)("h2",{children:"Item List"}),(0,m.jsx)("div",{className:"button-group",children:(0,m.jsx)("button",{className:"add-item-button",onClick:function(){return Y("/apps/item-register",{state:{business_id:t,category_id:L}})},children:"+ Add Item"})})]}),(0,m.jsxs)("div",{className:"category-tabs",children:[q.map((function(e){return(0,m.jsxs)("div",{className:"category-tab ".concat(L===e.category_id?"active":""),onClick:function(){return t=e.category_id,console.log("Category Clicked:",t),void O(t);var t},children:[(0,m.jsx)("img",{src:e.logo_image,alt:e.category_name}),(0,m.jsx)("p",{children:e.category_name}),(0,m.jsx)("div",{children:(0,m.jsx)("div",{onClick:function(e){return e.stopPropagation()},children:(0,m.jsx)(f.Z,{checked:h[e.category_id]||!1,onChange:function(n){return r=e.category_id,s=n,p((function(e){return(0,i.Z)((0,i.Z)({},e),{},(0,a.Z)({},r,s))})),o((0,g.$5)(r,s)),void setTimeout((function(){E(""),o((0,g.m$)(t))}),100);var r,s}})})}),(0,m.jsxs)("div",{children:[(0,m.jsx)(v.ffH,{size:20,style:{cursor:"pointer",marginRight:"10px"},onClick:function(){return Y("/apps/category-update",{state:{business_id:t,category_id:L}})}}),(0,m.jsx)(v.Xm5,{size:20,style:{cursor:"pointer",color:"red"},onClick:function(){return t=e.category_id,F(t),void G(!0);var t}}),(0,m.jsx)(Z.Z,{show:H,onClose:function(){return G(!1)},onConfirm:K,title:"Delete this Category",message:"Are you sure you want to delete this Category? This action cannot be undone."})]})]},e.category_id)})),(0,m.jsx)("button",{className:"add-category-button",onClick:function(){return Y("/apps/category-register",{state:{business_id:t}})},children:"+ Add Category"})]}),(0,m.jsx)("div",{className:"item-list",children:ee.length>0?ee.map((function(e){return(0,m.jsxs)("div",{className:"item-card",children:[(0,m.jsx)("img",{src:e.logo_image,alt:e.item_name,className:"item-image"}),(0,m.jsxs)("div",{className:"item-details",children:[(0,m.jsx)("h3",{children:e.item_name}),(0,m.jsxs)("p",{children:["Price: ",e.price]}),(0,m.jsx)("p",{children:"Total Amount: 0"})]}),(0,m.jsx)("div",{className:"item-actions",children:(0,m.jsx)("button",{className:"add-recipe-button",onClick:function(){return function(e,t){Y("/apps/recipe",{state:{business_id:e,item_id:t}})}(t,e.item_id)},children:"+ Recipe"})}),(0,m.jsx)("div",{className:"item-actions",children:(0,m.jsx)(v.ffH,{size:20,style:{cursor:"pointer",marginRight:"10px"},onClick:function(){return n=e.item_id,a=e.category_id,Y("/apps/edit-item",{state:{business_id:t,category_id:L,item_id:n}}),console.log("category_id: ",a),console.log("selectedCategoryId: ",L),void console.log("setSelectedCategoryId: ",O);var n,a}})}),(0,m.jsxs)("div",{className:"item-actions",children:[(0,m.jsx)(v.Xm5,{size:20,style:{cursor:"pointer",color:"red"},onClick:function(){return t=e.item_id,U(t),void W(!0);var t}}),(0,m.jsx)(Z.Z,{show:J,onClose:function(){return W(!1)},onConfirm:X,title:"Delete this Item",message:"Are you sure you want to delete this Item? This action cannot be undone."})]}),(0,m.jsx)(f.Z,{checked:h[e.item_id]||!1,onChange:function(n){return r=e.item_id,s=n,p((function(e){return(0,i.Z)((0,i.Z)({},e),{},(0,a.Z)({},r,s))})),o((0,x.us)(r,s)),void setTimeout((function(){E(""),o((0,g.m$)(t))}),100);var r,s}})]},e.item_id)})):(0,m.jsx)("p",{className:"no-items-message",children:"No items available"})})]})},_=function(){return(0,m.jsx)(p,{children:(0,m.jsx)(j,{})})}},91288:function(e,t,n){n.r(t),n.d(t,{default:function(){return q}});var a=n(15861),i=n(93433),r=n(4942),s=n(1413),l=n(29439),o=n(64687),c=n.n(o),d=n(72791),u=n(60364),m=n(57689),h=n(47022),p=n(9140),g=n(43360),x=n(2469),y=n(66252),v=n(85906),f=n(21827),Z=n(89743),j=n(2677),_=n(80184),b=function(e){var t=e.formData,n=(e.errorMsg,e.successMsg,e.handleChange),a=e.handleFileChange,r=e.logoPreview,s=e.swiggyPreview,l=e.bannerPreview,o=e.errors,c=function(e){var t=e.target,a=t.name,i=t.value;n({target:{name:a,value:i}})};return(0,_.jsx)(h.Z,{className:"register-item-container",children:(0,_.jsxs)(p.Z,{className:"shadow-sm",children:[(0,_.jsx)(p.Z.Header,{as:"h2",className:"text-center",children:"Register Item"}),(0,_.jsxs)(p.Z.Body,{children:[(0,_.jsxs)(Z.Z,{className:"mb-3",children:[(0,_.jsx)(j.Z,{md:4,children:(0,_.jsxs)(f.Z.Group,{children:[(0,_.jsx)(f.Z.Label,{children:"Menu Image"}),(0,_.jsx)(f.Z.Control,{type:"file",name:"logo_image",onChange:a}),r&&(0,_.jsx)("img",{src:r,alt:"Menu Preview",width:"100"})]})}),(0,_.jsx)(j.Z,{md:4,children:(0,_.jsxs)(f.Z.Group,{children:[(0,_.jsx)(f.Z.Label,{children:"Swiggy Image"}),(0,_.jsx)(f.Z.Control,{type:"file",name:"swiggy_image",onChange:a}),s&&(0,_.jsx)("img",{src:s,alt:"Swiggy Preview",width:"100"})]})}),(0,_.jsx)(j.Z,{md:4,children:(0,_.jsxs)(f.Z.Group,{children:[(0,_.jsx)(f.Z.Label,{children:"Banner Image"}),(0,_.jsx)(f.Z.Control,{type:"file",name:"banner_image",onChange:a}),l&&(0,_.jsx)("img",{src:l,alt:"Banner Preview",width:"100"})]})})]}),(0,_.jsxs)(Z.Z,{className:"mb-3",children:[(0,_.jsx)(j.Z,{md:4,children:(0,_.jsxs)(f.Z.Group,{children:[(0,_.jsxs)(f.Z.Label,{children:["Item Name (English) ",(0,_.jsx)("span",{className:"text-danger",children:"*"})]}),(0,_.jsx)(f.Z.Control,{type:"text",name:"item_name.english",required:!0,value:t.item_name.english,onChange:n,placeholder:"Enter Item Name in English"}),o.item_name&&(0,_.jsx)("small",{className:"text-danger",children:o.item_name})]})}),(0,_.jsx)(j.Z,{children:(0,_.jsxs)(f.Z.Group,{children:[(0,_.jsx)(f.Z.Label,{children:"Item Name (Hindi)"}),(0,_.jsx)(f.Z.Control,{type:"text",name:"item_name.hindi",value:t.item_name.hindi,onChange:n,placeholder:"Enter Item Name in Hindi"})]})}),(0,_.jsx)(j.Z,{children:(0,_.jsxs)(f.Z.Group,{children:[(0,_.jsx)(f.Z.Label,{children:"Item Name (Gujarati)"}),(0,_.jsx)(f.Z.Control,{type:"text",name:"item_name.gujarati",value:t.item_name.gujarati,onChange:n,placeholder:"Enter Item Name in Gujarati"})]})})]}),(0,_.jsx)(Z.Z,{className:"mb-3",children:(0,_.jsxs)(j.Z,{md:6,children:[(0,_.jsx)(f.Z.Label,{children:"Loose Quantity"}),(0,_.jsx)(f.Z.Check,{type:"checkbox",name:"is_loose",label:"Is Loose Quantity",checked:t.is_loose,onChange:function(e){var t=e.target.checked;n({target:{name:"is_loose",value:t}}),t||(n({target:{name:"quantity_type",value:""}}),n({target:{name:"quantity_params",value:""}}),n({target:{name:"quantity_value",value:""}}))}})]})}),t.is_loose&&(0,_.jsxs)(Z.Z,{className:"mb-3",children:[(0,_.jsxs)(j.Z,{md:6,children:[(0,_.jsx)(f.Z.Label,{children:"Quantity Type"}),(0,_.jsxs)(f.Z.Control,{as:"select",name:"quantity_type",value:t.quantity_type,onChange:n,children:[(0,_.jsx)("option",{value:"",children:"Select Quantity Type"}),(0,_.jsx)("option",{value:"piece",children:"Piece"}),(0,_.jsx)("option",{value:"weight",children:"Weight"}),(0,_.jsx)("option",{value:"volume",children:"Volume"})]})]}),"weight"===t.quantity_type&&(0,_.jsx)(_.Fragment,{children:(0,_.jsxs)(j.Z,{md:6,children:[(0,_.jsx)(f.Z.Label,{children:"Quantity Value"}),(0,_.jsxs)(Z.Z,{children:[(0,_.jsx)(j.Z,{md:7,children:(0,_.jsx)(f.Z.Control,{type:"number",name:"quantity_value",value:t.quantity_value,onChange:n,placeholder:"Enter Quantity"})}),(0,_.jsx)(j.Z,{md:5,children:(0,_.jsxs)(f.Z.Select,{name:"quantity_params",value:t.quantity_params,onChange:c,children:[(0,_.jsx)("option",{value:"",children:"Select Unit"}),(0,_.jsx)("option",{value:"gm",children:"gm"}),(0,_.jsx)("option",{value:"kg",children:"kg"})]})})]})]})}),"piece"===t.quantity_type&&(0,_.jsx)(_.Fragment,{children:(0,_.jsxs)(j.Z,{md:6,children:[(0,_.jsx)(f.Z.Label,{children:"Quantity Value"}),(0,_.jsx)(Z.Z,{children:(0,_.jsx)(j.Z,{md:8,children:(0,_.jsx)(f.Z.Control,{type:"number",name:"quantity_value",value:t.quantity_value,onChange:n,placeholder:"Enter Quantity"})})})]})}),"volume"===t.quantity_type&&(0,_.jsx)(_.Fragment,{children:(0,_.jsxs)(j.Z,{md:6,children:[(0,_.jsx)(f.Z.Label,{children:"Quantity Value"}),(0,_.jsxs)(Z.Z,{children:[(0,_.jsx)(j.Z,{md:7,children:(0,_.jsx)(f.Z.Control,{type:"number",name:"quantity_value",value:t.quantity_value,onChange:n,placeholder:"Enter Quantity"})}),(0,_.jsx)(j.Z,{md:5,children:(0,_.jsxs)(f.Z.Select,{name:"quantity_params",value:t.quantity_params,onChange:c,children:[(0,_.jsx)("option",{value:"",children:"Select Unit"}),(0,_.jsx)("option",{value:"m",children:"ml"}),(0,_.jsx)("option",{value:"lt",children:"lt"})]})})]})]})})]}),(0,_.jsxs)(Z.Z,{className:"mb-3",children:[(0,_.jsxs)(j.Z,{md:6,children:[(0,_.jsx)(f.Z.Label,{children:"Online Display Name"}),(0,_.jsx)(f.Z.Control,{type:"text",name:"online_display_name",value:t.online_display_name,onChange:n,placeholder:"Enter Online Display Name"})]}),(0,_.jsxs)(j.Z,{md:6,children:[(0,_.jsx)(f.Z.Label,{children:"Item Description"}),(0,_.jsx)(f.Z.Control,{type:"text",name:"description",value:t.description,onChange:n,placeholder:"Enter Item Description"})]})]}),(0,_.jsxs)(Z.Z,{className:"mb-3",children:[(0,_.jsxs)(j.Z,{md:6,children:[(0,_.jsx)(f.Z.Label,{children:"Item Dietary"}),(0,_.jsxs)(f.Z.Control,{as:"select",name:"dietary",value:t.dietary,onChange:n,required:!0,children:[(0,_.jsx)("option",{value:"",children:"Select Dietary Type"}),(0,_.jsx)("option",{value:"veg",children:"veg"}),(0,_.jsx)("option",{value:"non-veg",children:"non-veg"})]}),o.dietary&&(0,_.jsx)("small",{className:"text-danger",children:o.dietary})]}),(0,_.jsx)(j.Z,{md:6,children:(0,_.jsxs)(f.Z.Group,{children:[(0,_.jsx)(f.Z.Label,{children:"Item GST Type"}),(0,_.jsxs)(f.Z.Control,{as:"select",name:"gst_type",value:t.gst_type,onChange:n,children:[(0,_.jsx)("option",{value:"",children:"Select GST Type"}),(0,_.jsx)("option",{value:"goods",children:"Goods"}),(0,_.jsx)("option",{value:"services",children:"Services"})]})]})})]}),(0,_.jsx)(Z.Z,{children:(0,_.jsxs)(j.Z,{md:6,children:[(0,_.jsxs)(f.Z.Group,{children:[(0,_.jsxs)(f.Z.Label,{children:["Item Order Type ",(0,_.jsx)("span",{className:"text-danger",children:"*"})]}),["delivery","pick_up","dine_in","online"].map((function(e){return(0,_.jsx)(f.Z.Check,{type:"checkbox",label:e.replace("_"," ").toUpperCase(),name:"available_order_type",value:e,checked:Array.isArray(t.available_order_type)&&t.available_order_type.includes(e),onChange:function(e){var a=e.target,r=a.value,s=a.checked?[].concat((0,i.Z)((t.available_order_type||[]).filter((function(e){return""!==e.trim()}))),[r]):(t.available_order_type||[]).filter((function(e){return e!==r&&""!==e.trim()}));console.log("Updated Order Types (Cleaned):",s),n({target:{name:"available_order_type",value:s}})}},e)}))]}),o.available_order_type&&(0,_.jsx)("small",{className:"text-danger",children:o.available_order_type})]})})]})]})})},C=n(51649),N=n(1917),S=n(6901),k=(n(92414),n(31187)),w=function(e){var t,n,a=e.selectedOutlets,r=e.setSelectedOutlets,s=(0,m.TH)(),o=null===(t=s.state)||void 0===t?void 0:t.business_id,c=null===(n=s.state)||void 0===n?void 0:n.category_id,u=(0,C.Sc)(),g=u.dispatch,x=u.appSelector,y=(0,d.useState)(!0),v=(0,l.Z)(y,2),b=(v[0],v[1],x((function(e){return e.business.businesses||[]}))),w=x((function(e){return e.category.categories||[]})),E=b.find((function(e){return e.business_id===o})),q=w.find((function(e){return e.category_id===c}));if((0,d.useEffect)((function(){E||g((0,N.ck)()),q||g((0,S.m$)(o,c))}),[g,E,q,o,c]),(0,d.useEffect)((function(){console.log("Business Response:",E),console.log("Category Response:",q)}),[E,q]),!E||!q)return(0,_.jsx)("p",{className:"loading",children:"Loading data..."});var P=E.outlets.filter((function(e){return q.outlets.includes(e.outlet_id)}));return(0,_.jsx)(h.Z,{className:"register-item-container",children:(0,_.jsxs)(p.Z,{className:"shadow-sm",children:[(0,_.jsx)(p.Z.Header,{as:"h2",className:"text-center",children:"Select Outlets"}),(0,_.jsxs)(p.Z.Body,{children:[(0,_.jsx)(k.Z,{}),(0,_.jsx)(Z.Z,{className:"mb-4",children:(0,_.jsxs)(j.Z,{children:[(0,_.jsx)(f.Z.Label,{style:{fontSize:"1.5rem",fontWeight:"bold"},children:"Outlet Name"}),(0,_.jsx)("button",{onClick:function(e){e.preventDefault(),a.length===P.length?r([]):r(P)},className:"btn btn-primary btn-sm ms-2",children:a.length===P.length?"Deselect All":"Select All"})]})}),P.length>0?(0,_.jsx)(Z.Z,{children:P.map((function(e){var t=a.some((function(t){return t.outlet_id===e.outlet_id}));return(0,_.jsx)(j.Z,{md:12,className:"mb-3 shadow-sm",children:(0,_.jsxs)("div",{className:"d-flex align-items-center p-2",style:{cursor:"pointer",fontSize:"1.2rem"},children:[(0,_.jsx)(f.Z.Check,{type:"checkbox",checked:t,onChange:function(t){t.stopPropagation(),function(e){r((function(t){return t.some((function(t){return t.outlet_id===e.outlet_id}))?t.filter((function(t){return t.outlet_id!==e.outlet_id})):[].concat((0,i.Z)(t),[e])}))}(e)},id:"outlet-checkbox-".concat(e.outlet_id),className:"me-3",style:{transform:"scale(1.5)"}}),(0,_.jsx)("label",{htmlFor:"outlet-checkbox-".concat(e.outlet_id),style:{cursor:"pointer"},children:e.outlet_name})]})},e.outlet_id)}))}):(0,_.jsx)("p",{className:"text-muted text-center",children:"No outlets available for this Category."})]})]})})},E=function(e){var t=e.selectedOutlets,n=e.formData,a=e.handlePriceChange,i=e.handleChange,r=e.setFormData;return(0,_.jsx)(h.Z,{className:"register-item-container",children:(0,_.jsxs)(p.Z,{className:"shadow-sm",children:[(0,_.jsx)(p.Z.Header,{as:"h2",className:"text-center",children:"Outlet List"}),(0,_.jsxs)(p.Z.Body,{children:[(0,_.jsxs)(Z.Z,{className:"mb-3",children:[(0,_.jsx)(j.Z,{md:6,children:(0,_.jsxs)(f.Z.Group,{children:[(0,_.jsx)(f.Z.Label,{children:"Master Price"}),(0,_.jsx)(f.Z.Control,{type:"number",name:"price",value:n.price,onChange:i,placeholder:"Enter Master Price"})]})}),(0,_.jsx)(j.Z,{md:6,className:"d-flex align-items-end",children:(0,_.jsx)(g.Z,{variant:"primary",onClick:function(){var e=parseFloat(n.price);isNaN(e)||r((function(n){return(0,s.Z)((0,s.Z)({},n),{},{outlet_prices:t.map((function(t){return{outlet_id:t.outlet_id,price:e}}))})}))},children:"Apply All"})})]}),t.length>0?t.map((function(e){var t,i=null===(t=n.outlet_prices.find((function(t){return t.outlet_id===e.outlet_id})))||void 0===t?void 0:t.price;return(0,_.jsx)(p.Z,{className:"mb-3 shadow-sm",children:(0,_.jsx)(p.Z.Body,{children:(0,_.jsxs)(Z.Z,{children:[(0,_.jsx)(j.Z,{md:6,children:(0,_.jsx)("h3",{className:"mb-2",children:e.outlet_name})}),(0,_.jsx)(j.Z,{md:6,children:(0,_.jsx)(f.Z.Group,{children:(0,_.jsx)(f.Z.Control,{type:"number",value:i||"",onChange:function(t){return a(t,e.outlet_id)},placeholder:"Enter Outlet Price",className:"price-input"})})})]})})},e.outlet_id)})):(0,_.jsx)("p",{className:"text-center text-muted",children:"No outlets selected."})]})]})})},q=function(){var e,t,n,o=(0,u.I0)(),f=(0,d.useState)({item_name:{hindi:"",english:"",gujarati:""},online_display_name:"",price:"80",description:"",dietary:"veg",available_order_type:[""],gst_type:"none",category_id:"",business_id:"",logo_image:null,swiggy_image:null,banner_image:null,outlet_prices:[{outlet_id:"",price:0}],is_loose:!1,quantity_type:"none",quantity_params:"none",quantity_value:"none"}),Z=(0,l.Z)(f,2),j=Z[0],C=Z[1],N=(0,d.useState)(null),S=(0,l.Z)(N,2),k=S[0],q=S[1],P=(0,d.useState)(null),I=(0,l.Z)(P,2),L=I[0],O=I[1],T=(0,d.useState)(null),D=(0,l.Z)(T,2),A=D[0],F=D[1],R=(0,d.useState)(null),B=(0,l.Z)(R,2),H=B[0],G=(B[1],(0,d.useState)([])),M=(0,l.Z)(G,2),Q=M[0],z=M[1],U=(0,m.TH)(),$=null===(e=U.state)||void 0===e?void 0:e.business_id,V=null===(t=U.state)||void 0===t?void 0:t.category_id,J=null===(n=U.state)||void 0===n?void 0:n.item_id,W=Boolean(J),Y=(0,m.s0)(),X=(0,d.useState)({}),K=(0,l.Z)(X,2),ee=K[0],te=K[1],ne=(0,d.useState)(""),ae=(0,l.Z)(ne,2),ie=ae[0],re=ae[1],se=(0,d.useState)(""),le=(0,l.Z)(se,2),oe=le[0],ce=le[1];(0,d.useEffect)((function(){$&&V&&C((function(e){return(0,s.Z)((0,s.Z)({},e),{},{business_id:$,category_id:V})}))}),[$,V]);var de=function(e){var t=e.target,n=t.name,a=t.value;t.type;C((function(t){if(n.startsWith("item_name.")){var i=n.split(".")[1];return(0,s.Z)((0,s.Z)({},t),{},{item_name:(0,s.Z)((0,s.Z)({},t.item_name),{},(0,r.Z)({},i,a))})}if(e.target instanceof HTMLSelectElement&&e.target.multiple){var l=Array.from(e.target.selectedOptions).map((function(e){return e.value}));return(0,s.Z)((0,s.Z)({},t),{},(0,r.Z)({},n,l))}return(0,s.Z)((0,s.Z)({},t),{},(0,r.Z)({},n,a))}))};(0,d.useEffect)((function(){console.log("Selected Business:",H)}),[H]),(0,d.useEffect)((function(){console.log("business_id:",$),console.log("category_id:",V),$&&C((function(e){return(0,s.Z)((0,s.Z)({},e),{},{business_id:$})}))}),[$]);var ue=j.outlet_prices.filter((function(e){return""!==e.outlet_id&&0!==e.price})),me=function(){var e=(0,a.Z)(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),console.log("Final Payload Before Dispatch:",JSON.stringify(j,null,2)),console.log("Final Payload:",j),(n=new FormData).append("item_name",JSON.stringify(j.item_name)),n.append("online_display_name",j.online_display_name),n.append("price",j.price),n.append("description",j.description),n.append("dietary",j.dietary),n.append("available_order_type",JSON.stringify(j.available_order_type)),n.append("gst_type",j.gst_type),n.append("category_id",j.category_id),n.append("business_id",j.business_id),j.logo_image&&n.append("logo_image",j.logo_image),j.swiggy_image&&n.append("swiggy_image",j.swiggy_image),j.banner_image&&n.append("banner_image",j.banner_image),ue.length>0&&n.append("outlet_prices",JSON.stringify(ue)),n.append("is_loose",j.is_loose.toString()),n.append("quantity_type",j.quantity_type),n.append("quantity_params",j.quantity_params),n.append("quantity_value",j.quantity_value),n.forEach((function(e,t){console.log("".concat(t,":"),e)})),e.prev=22,!W){e.next=28;break}console.log("Dispatching EDIT API: "),o((0,v.$G)(n)),e.next=32;break;case 28:return console.log("Dispatching API request..."),e.next=31,o((0,v.JJ)(n));case 31:console.log("API request dispatched!");case 32:ce("Item registered successfully!"),Y("/apps/manage-menu"),re(""),C({item_name:{hindi:"",english:"",gujarati:""},online_display_name:"",price:"",description:"",dietary:"",available_order_type:[""],gst_type:"",category_id:"",business_id:"",logo_image:null,swiggy_image:null,banner_image:null,outlet_prices:[{outlet_id:"",price:0}],is_loose:!1,quantity_type:"none",quantity_params:"none",quantity_value:""}),q(null),O(null),F(null),e.next=45;break;case 41:e.prev=41,e.t0=e.catch(22),re("Error registering item, please try again."),ce("");case 45:case"end":return e.stop()}}),e,null,[[22,41]])})));return function(t){return e.apply(this,arguments)}}(),he=(0,y.h)([(0,_.jsx)(b,{formData:j,errorMsg:ie,successMsg:oe,handleChange:de,handleFileChange:function(e){var t,n=null===(t=e.target.files)||void 0===t?void 0:t[0],a=e.target.name;if(n){var i=URL.createObjectURL(n);"logo_image"===a&&q(i),"swiggy_image"===a&&O(i),"banner_image"===a&&F(i),C((function(e){return(0,s.Z)((0,s.Z)({},e),{},(0,r.Z)({},a,n))}))}},handleSubmit:me,logoPreview:k,swiggyPreview:L,bannerPreview:A,errors:ee}),(0,_.jsx)(w,{selectedOutlets:Q,setSelectedOutlets:z}),(0,_.jsx)(E,{formData:j,handlePriceChange:function(e,t){var n=parseFloat(e.target.value);if(!(isNaN(n)||n<=0)){var a=(0,i.Z)(j.outlet_prices),r=a.findIndex((function(e){return e.outlet_id===t}));-1!==r?a[r].price=n:a.push({outlet_id:t,price:n}),C((0,s.Z)((0,s.Z)({},j),{},{outlet_prices:a}))}},selectedOutlets:Q,business:H,handleChange:de,setFormData:C})]),pe=he.steps,ge=he.currentStepIndex,xe=he.step,ye=he.isFirstStep,ve=he.isLastStep,fe=he.back,Ze=he.next;return(0,_.jsx)(h.Z,{className:"register-business-container",children:(0,_.jsx)(p.Z,{className:"shadow-sm",children:(0,_.jsxs)(p.Z.Body,{children:[(0,_.jsxs)("form",{onSubmit:me,children:[" ",(0,_.jsxs)("div",{children:["Step ",ge+1," of ",pe.length]}),xe,(0,_.jsxs)("div",{className:"d-flex justify-content-center mt-4 gap-3",children:[!ye&&(0,_.jsx)(g.Z,{variant:"secondary",type:"button",onClick:fe,className:"px-4 py-2",children:"Back"}),(0,_.jsx)(g.Z,{variant:"primary",onClick:function(e){(function(){console.log("Available Order TYPE VALUE:",j.available_order_type);var e={};return 0===ge&&(j.item_name.english.trim()||(e.item_name="Item name is required."),Array.isArray(j.available_order_type)&&0!==j.available_order_type.filter(Boolean).length||(console.log("Available Order TYPE ERROR: Required field is missing!"),e.available_order_type="Order Type is required."),j.dietary||(e.dietary="Dietary Type is required")),console.log("Available Order TYPE ERROR: ",ee),te(e),0===Object.keys(e).length})()&&(j.is_loose&&!j.quantity_type&&C((function(e){return(0,s.Z)((0,s.Z)({},e),{},{is_loose:!1})})),j.quantity_type&&!j.quantity_value&&C((function(e){return(0,s.Z)((0,s.Z)({},e),{},{is_loose:!1})})),ve?me(e):Ze())},className:"px-4 py-2",children:ve?W?"Update":"Finish":"Next"})]})]}),ie&&(0,_.jsx)(x.Z,{variant:"danger",className:"mt-3",children:ie}),oe&&(0,_.jsx)(x.Z,{variant:"success",className:"mt-3",children:oe})]})})})}},91555:function(e,t,n){n(72791),n(92414);var a=n(80184);t.Z=function(e){var t=e.checked,n=e.onChange,i=e.label;return(0,a.jsxs)("label",{className:"toggle-switch",children:[(0,a.jsx)("input",{type:"checkbox",checked:t,onChange:function(e){return null===n||void 0===n?void 0:n(e.target.checked)}}),(0,a.jsx)("span",{className:"slider"}),i&&(0,a.jsx)("span",{className:"switch-label",children:i})]})}},2469:function(e,t,n){var a=n(1413),i=n(45987),r=n(81694),s=n.n(r),l=n(72791),o=n(32592),c=n(39007),d=n(16445),u=n(10162),m=n(72709),h=n(80473),p=n(27472),g=n(66543),x=n(80184),y=["bsPrefix","show","closeLabel","closeVariant","className","children","variant","onClose","dismissible","transition"],v=(0,p.Z)("h4");v.displayName="DivStyledAsH4";var f=(0,g.Z)("alert-heading",{Component:v}),Z=(0,g.Z)("alert-link",{Component:d.Z}),j={variant:"primary",show:!0,transition:m.Z,closeLabel:"Close alert"},_=l.forwardRef((function(e,t){var n=(0,o.Ch)(e,{show:"onClose"}),r=n.bsPrefix,l=n.show,d=n.closeLabel,p=n.closeVariant,g=n.className,v=n.children,f=n.variant,Z=n.onClose,j=n.dismissible,_=n.transition,b=(0,i.Z)(n,y),C=(0,u.vE)(r,"alert"),N=(0,c.Z)((function(e){Z&&Z(!1,e)})),S=!0===_?m.Z:_,k=(0,x.jsxs)("div",(0,a.Z)((0,a.Z)({role:"alert"},S?void 0:b),{},{ref:t,className:s()(g,C,f&&"".concat(C,"-").concat(f),j&&"".concat(C,"-dismissible")),children:[j&&(0,x.jsx)(h.Z,{onClick:N,"aria-label":d,variant:p}),v]}));return S?(0,x.jsx)(S,(0,a.Z)((0,a.Z)({unmountOnExit:!0},b),{},{ref:void 0,in:l,children:k})):l?k:null}));_.displayName="Alert",_.defaultProps=j,t.Z=Object.assign(_,{Link:Z,Heading:f})},9140:function(e,t,n){n.d(t,{Z:function(){return q}});var a=n(1413),i=n(45987),r=n(81694),s=n.n(r),l=n(72791),o=n(10162),c=n(66543),d=n(27472),u=n(80184),m=["bsPrefix","className","variant","as"],h=l.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,l=e.variant,c=e.as,d=void 0===c?"img":c,h=(0,i.Z)(e,m),p=(0,o.vE)(n,"card-img");return(0,u.jsx)(d,(0,a.Z)({ref:t,className:s()(l?"".concat(p,"-").concat(l):p,r)},h))}));h.displayName="CardImg";var p=h,g=n(96040),x=["bsPrefix","className","as"],y=l.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,c=e.as,d=void 0===c?"div":c,m=(0,i.Z)(e,x),h=(0,o.vE)(n,"card-header"),p=(0,l.useMemo)((function(){return{cardHeaderBsPrefix:h}}),[h]);return(0,u.jsx)(g.Z.Provider,{value:p,children:(0,u.jsx)(d,(0,a.Z)((0,a.Z)({ref:t},m),{},{className:s()(r,h)}))})}));y.displayName="CardHeader";var v=y,f=["bsPrefix","className","bg","text","border","body","children","as"],Z=(0,d.Z)("h5"),j=(0,d.Z)("h6"),_=(0,c.Z)("card-body"),b=(0,c.Z)("card-title",{Component:Z}),C=(0,c.Z)("card-subtitle",{Component:j}),N=(0,c.Z)("card-link",{Component:"a"}),S=(0,c.Z)("card-text",{Component:"p"}),k=(0,c.Z)("card-footer"),w=(0,c.Z)("card-img-overlay"),E=l.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,l=e.bg,c=e.text,d=e.border,m=e.body,h=e.children,p=e.as,g=void 0===p?"div":p,x=(0,i.Z)(e,f),y=(0,o.vE)(n,"card");return(0,u.jsx)(g,(0,a.Z)((0,a.Z)({ref:t},x),{},{className:s()(r,y,l&&"bg-".concat(l),c&&"text-".concat(c),d&&"border-".concat(d)),children:m?(0,u.jsx)(_,{children:h}):h}))}));E.displayName="Card",E.defaultProps={body:!1};var q=Object.assign(E,{Img:p,Title:b,Subtitle:C,Body:_,Link:N,Text:S,Header:v,Footer:k,ImgOverlay:w})},96040:function(e,t,n){var a=n(72791).createContext(null);a.displayName="CardHeaderContext",t.Z=a},99944:function(){}}]);
//# sourceMappingURL=1288.ae1baf1d.chunk.js.map