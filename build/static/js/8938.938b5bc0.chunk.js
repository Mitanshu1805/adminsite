"use strict";(self.webpackChunkadminto_react=self.webpackChunkadminto_react||[]).push([[8938],{15468:function(e,n,t){t(72791);var i=t(95316),r=t(43360),s=t(80184);n.Z=function(e){var n=e.show,t=e.onClose,o=e.onConfirm,a=e.title,c=void 0===a?"Confirm Deletion":a,d=e.message,l=void 0===d?"Are you sure you want to delete this item?":d;return(0,s.jsxs)(i.Z,{show:n,onHide:t,centered:!0,children:[(0,s.jsx)(i.Z.Header,{closeButton:!0,children:(0,s.jsx)(i.Z.Title,{children:c})}),(0,s.jsx)(i.Z.Body,{children:(0,s.jsx)("p",{children:l})}),(0,s.jsxs)(i.Z.Footer,{children:[(0,s.jsx)(r.Z,{variant:"secondary",onClick:t,children:"Cancel"}),(0,s.jsx)(r.Z,{variant:"danger",onClick:o,children:"Delete"})]})]})}},92414:function(e,n,t){t.r(n),t.d(n,{default:function(){return b}});var i=t(4942),r=t(1413),s=t(29439),o=t(72791),a=t(57689),c=t(15671),d=t(43144),l=t(60136),u=t(29388),m=t(80184),f=function(e){(0,l.Z)(t,e);var n=(0,u.Z)(t);function t(){var e;(0,c.Z)(this,t);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(e=n.call.apply(n,[this].concat(r))).state={hasError:!1},e}return(0,d.Z)(t,[{key:"componentDidCatch",value:function(e,n){console.error("Error caught by Error Boundary:",e,n)}},{key:"render",value:function(){return this.state.hasError?(0,m.jsx)("h1",{children:"Something went wrong."}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(){return{hasError:!0}}}]),t}(o.Component),h=f,v=t(6901),g=t(85906),x=t(51649),p=t(59135),j=(t(99944),t(91555)),Z=t(15468),y=function(){var e,n=null===(e=(0,a.TH)().state)||void 0===e?void 0:e.business_id,t=(0,x.Sc)(),c=t.dispatch,d=t.appSelector,l=(0,o.useState)({}),u=(0,s.Z)(l,2),f=u[0],h=u[1],y=(0,o.useState)(!1),b=(0,s.Z)(y,2),C=(b[0],b[1],(0,o.useState)(!1)),_=(0,s.Z)(C,2),N=(_[0],_[1],(0,o.useState)(null)),k=(0,s.Z)(N,2),w=(k[0],k[1],(0,o.useState)("")),S=(0,s.Z)(w,2),E=(S[0],S[1]),I=d((function(e){return e.category.categories||[]})),P=(0,o.useState)(null),T=(0,s.Z)(P,2),R=T[0],A=T[1],H=(0,o.useState)(null),D=(0,s.Z)(H,2),L=D[0],z=D[1],B=(0,o.useState)(!1),G=(0,s.Z)(B,2),$=G[0],F=G[1],M=(0,o.useState)(null),X=(0,s.Z)(M,2),q=X[0],O=X[1],U=(0,o.useState)(!1),W=(0,s.Z)(U,2),K=W[0],Y=W[1],J=(0,a.s0)();(0,o.useEffect)((function(){n&&c((0,v.m$)(n))}),[c,n]),(0,o.useEffect)((function(){I.length>0&&!R&&A(I[0].category_id)}),[I,R]),(0,o.useEffect)((function(){if(I.length>0){var e={};I.forEach((function(n){e[n.category_id]=n.is_active,n.items.forEach((function(n){e[n.item_id]=n.is_active}))})),h(e)}}),[I]);var Q=function(){q&&c((0,g.wz)(q)),setTimeout((function(){c((0,v.m$)(n))}),500),Y(!1)},V=function(){L&&c((0,v.uu)(L)),setTimeout((function(){c((0,v.m$)(n))}),500),F(!1)},ee=I.filter((function(e){return!R||e.category_id===R})).flatMap((function(e){return e.items}));return console.log("Filtered Items:",ee),(0,m.jsxs)("div",{className:"manage-menu-container",children:[(0,m.jsxs)("div",{className:"header",children:[(0,m.jsx)("h2",{children:"Item List"}),(0,m.jsx)("div",{className:"button-group",children:(0,m.jsx)("button",{className:"add-item-button",onClick:function(){return J("/apps/item-register",{state:{business_id:n,category_id:R}})},children:"+ Add Item"})})]}),(0,m.jsxs)("div",{className:"category-tabs",children:[I.map((function(e){return(0,m.jsxs)("div",{className:"category-tab ".concat(R===e.category_id?"active":""),onClick:function(){return n=e.category_id,console.log("Category Clicked:",n),void A(n);var n},children:[(0,m.jsx)("img",{src:e.logo_image,alt:e.category_name}),(0,m.jsx)("p",{children:e.category_name}),(0,m.jsx)("div",{children:(0,m.jsx)("div",{onClick:function(e){return e.stopPropagation()},children:(0,m.jsx)(j.Z,{checked:f[e.category_id]||!1,onChange:function(t){return s=e.category_id,o=t,h((function(e){return(0,r.Z)((0,r.Z)({},e),{},(0,i.Z)({},s,o))})),c((0,v.$5)(s,o)),void setTimeout((function(){E(""),c((0,v.m$)(n))}),100);var s,o}})})}),(0,m.jsxs)("div",{children:[(0,m.jsx)(p.ffH,{size:20,style:{cursor:"pointer",marginRight:"10px"},onClick:function(){return J("/apps/category-update",{state:{business_id:n,category_id:R}})}}),(0,m.jsx)(p.Xm5,{size:20,style:{cursor:"pointer",color:"red"},onClick:function(){return n=e.category_id,z(n),void F(!0);var n}}),(0,m.jsx)(Z.Z,{show:$,onClose:function(){return F(!1)},onConfirm:V,title:"Delete this Category",message:"Are you sure you want to delete this Category? This action cannot be undone."})]})]},e.category_id)})),(0,m.jsx)("button",{className:"add-category-button",onClick:function(){return J("/apps/category-register",{state:{business_id:n}})},children:"+ Add Category"})]}),(0,m.jsx)("div",{className:"item-list",children:ee.length>0?ee.map((function(e){return(0,m.jsxs)("div",{className:"item-card",children:[(0,m.jsx)("img",{src:e.logo_image,alt:e.item_name,className:"item-image"}),(0,m.jsxs)("div",{className:"item-details",children:[(0,m.jsx)("h3",{children:e.item_name}),(0,m.jsxs)("p",{children:["Price: ",e.price]}),(0,m.jsx)("p",{children:"Total Amount: 0"})]}),(0,m.jsx)("div",{className:"item-actions",children:(0,m.jsx)("button",{className:"add-recipe-button",onClick:function(){return function(e,n){J("/apps/recipe",{state:{business_id:e,item_id:n}})}(n,e.item_id)},children:"+ Recipe"})}),(0,m.jsx)("div",{className:"item-actions",children:(0,m.jsx)(p.ffH,{size:20,style:{cursor:"pointer",marginRight:"10px"},onClick:function(){return t=e.item_id,i=e.category_id,J("/apps/edit-item",{state:{business_id:n,category_id:R,item_id:t}}),console.log("category_id: ",i),console.log("selectedCategoryId: ",R),void console.log("setSelectedCategoryId: ",A);var t,i}})}),(0,m.jsxs)("div",{className:"item-actions",children:[(0,m.jsx)(p.Xm5,{size:20,style:{cursor:"pointer",color:"red"},onClick:function(){return n=e.item_id,O(n),void Y(!0);var n}}),(0,m.jsx)(Z.Z,{show:K,onClose:function(){return Y(!1)},onConfirm:Q,title:"Delete this Item",message:"Are you sure you want to delete this Item? This action cannot be undone."})]}),(0,m.jsx)(j.Z,{checked:f[e.item_id]||!1,onChange:function(t){return s=e.item_id,o=t,h((function(e){return(0,r.Z)((0,r.Z)({},e),{},(0,i.Z)({},s,o))})),c((0,g.us)(s,o)),void setTimeout((function(){E(""),c((0,v.m$)(n))}),100);var s,o}})]},e.item_id)})):(0,m.jsx)("p",{className:"no-items-message",children:"No items available"})})]})},b=function(){return(0,m.jsx)(h,{children:(0,m.jsx)(y,{})})}},91555:function(e,n,t){t(72791),t(92414);var i=t(80184);n.Z=function(e){var n=e.checked,t=e.onChange,r=e.label;return(0,i.jsxs)("label",{className:"toggle-switch",children:[(0,i.jsx)("input",{type:"checkbox",checked:n,onChange:function(e){return null===t||void 0===t?void 0:t(e.target.checked)}}),(0,i.jsx)("span",{className:"slider"}),r&&(0,i.jsx)("span",{className:"switch-label",children:r})]})}},60625:function(e,n,t){t.r(n),t.d(n,{default:function(){return Z}});var i=t(4942),r=t(1413),s=t(29439),o=t(72791),a=t(57689),c=t(9140),d=t(43360),l=t(62591),u=t(51649),m=t(77914),f=t(59135),h=t(91555),v=t(95316),g=t(21827),x=t(60364),p=t(80184),j=function(e){var n=e.show,t=e.onClose,i=e.business_id,a=e.item_id,c=(0,x.I0)(),l=(0,x.v9)((function(e){return e.ingredient.ingredients||[]})),u=(0,o.useState)(""),f=(0,s.Z)(u,2),h=f[0],j=f[1],Z=(0,o.useState)(""),y=(0,s.Z)(Z,2),b=y[0],C=y[1],_=(0,o.useState)(""),N=(0,s.Z)(_,2),k=N[0],w=N[1],S=(0,o.useState)(""),E=(0,s.Z)(S,2),I=E[0],P=E[1],T=(0,o.useState)(!1),R=(0,s.Z)(T,2),A=R[0],H=R[1],D=(0,o.useState)([]),L=(0,s.Z)(D,2),z=L[0],B=L[1];(0,o.useEffect)((function(){n&&c((0,m.En)(i))}),[n,c,i]),(0,o.useEffect)((function(){n||(j(""),C(""),w(""),P(""),H(!1),B([]))}),[n]);return(0,p.jsxs)(v.Z,{show:n,onHide:t,centered:!0,children:[(0,p.jsx)(v.Z.Header,{closeButton:!0,children:(0,p.jsx)(v.Z.Title,{children:"Register New Recipe"})}),(0,p.jsx)(v.Z.Body,{children:(0,p.jsxs)(g.Z,{children:[(0,p.jsxs)(g.Z.Group,{children:[(0,p.jsx)(g.Z.Label,{children:"Preparation Time (minutes)"}),(0,p.jsx)(g.Z.Control,{type:"number",value:h,onChange:function(e){return j(e.target.value)}})]}),(0,p.jsxs)(g.Z.Group,{children:[(0,p.jsx)(g.Z.Label,{children:"Cooking Time (minutes)"}),(0,p.jsx)(g.Z.Control,{type:"number",value:b,onChange:function(e){return C(e.target.value)}})]}),(0,p.jsxs)(g.Z.Group,{children:[(0,p.jsx)(g.Z.Label,{children:"Preparation Type"}),(0,p.jsx)(g.Z.Control,{type:"text",value:k,onChange:function(e){return w(e.target.value)}})]}),(0,p.jsxs)(g.Z.Group,{children:[(0,p.jsx)(g.Z.Label,{children:"Instructions"}),(0,p.jsx)(g.Z.Control,{as:"textarea",value:I,onChange:function(e){return P(e.target.value)}})]}),(0,p.jsx)(g.Z.Group,{className:"mb-3",children:(0,p.jsx)(g.Z.Check,{type:"checkbox",label:"Is Active?",checked:A,onChange:function(e){return H(e.target.checked)}})}),(0,p.jsxs)(g.Z.Group,{children:[(0,p.jsx)(g.Z.Label,{children:"Select Ingredients"}),(0,p.jsx)(g.Z.Control,{as:"select",multiple:!0,onChange:function(e){return function(e){var n=e.target,t=Array.from(n.selectedOptions,(function(e){return e.value})).map((function(e){return{ingredient_id:e,quantity:1,unit:"g"}}));B(t)}(e)},children:l.map((function(e){return(0,p.jsx)("option",{value:e.ingredient_id,children:e.name},e.ingredient_id)}))})]}),(0,p.jsx)("div",{className:"mt-3",children:z.map((function(e){var n;return(0,p.jsxs)("div",{className:"d-flex align-items-center mb-2",children:[(0,p.jsx)("span",{className:"me-3",children:null===(n=l.find((function(n){return n.ingredient_id===e.ingredient_id})))||void 0===n?void 0:n.name}),(0,p.jsx)(g.Z.Control,{type:"number",value:e.quantity,onChange:function(n){return t=e.ingredient_id,i=Number(n.target.value),void B(z.map((function(e){return e.ingredient_id===t?(0,r.Z)((0,r.Z)({},e),{},{quantity:i}):e})));var t,i},style:{width:"80px",marginRight:"10px"}}),(0,p.jsx)(g.Z.Control,{type:"text",value:e.unit,onChange:function(n){return t=e.ingredient_id,i=n.target.value,void B(z.map((function(e){return e.ingredient_id===t?(0,r.Z)((0,r.Z)({},e),{},{unit:i}):e})));var t,i},style:{width:"80px"}}),(0,p.jsx)(d.Z,{variant:"danger",size:"sm",onClick:function(){return B(z.filter((function(n){return n.ingredient_id!==e.ingredient_id})))},className:"ms-2",children:"X"})]},e.ingredient_id)}))})]})}),(0,p.jsxs)(v.Z.Footer,{children:[(0,p.jsx)(d.Z,{variant:"secondary",onClick:t,children:"Cancel"}),(0,p.jsx)(d.Z,{variant:"primary",onClick:function(){var e={item_id:a,business_id:i,preparation_time:Number(h),cooking_time:Number(b),preparation_type:k,instructions:I,is_active:A,ingredients:z};c((0,m.bY)(e)),setTimeout((function(){c((0,m.iW)(i,a)),t()}),500)},children:"Add Recipe"})]})]})},Z=function(){var e,n,t=(0,u.Sc)(),v=t.dispatch,g=t.appSelector,x=(0,a.TH)(),Z=null===(e=x.state)||void 0===e?void 0:e.item_id,y=(0,o.useState)(!1),b=(0,s.Z)(y,2),C=b[0],_=b[1],N=g((function(e){var n;return(null===(n=e.ingredient)||void 0===n?void 0:n.ingredients)||[]}));console.log("ingredients>>>>>",N);var k=(0,o.useState)({}),w=(0,s.Z)(k,2),S=w[0],E=w[1],I=(0,o.useState)(""),P=(0,s.Z)(I,2),T=(P[0],P[1]),R=null===(n=x.state)||void 0===n?void 0:n.business_id;console.log("business_id",R),console.log("item_id",Z),(0,o.useEffect)((function(){R&&(console.log("Dispatching recipeIngredientList and recipeList"),v((0,m.En)(R)),console.log("Dispatching recipeList with business_id:",R),v((0,m.iW)(R,Z)))}),[v,R]);return(0,p.jsx)(c.Z,{children:(0,p.jsxs)(c.Z.Body,{children:[(0,p.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[(0,p.jsx)("h4",{className:"header-title",children:"Ingredient List"}),(0,p.jsx)(d.Z,{variant:"primary",onClick:function(){console.log("RECIPE ADD CLICKED"),C||_(!0)},children:"Add New Recipe"}),(0,p.jsx)(j,{show:C,onClose:function(){console.log("CloseRecipeModal"),_(!1)},business_id:R,item_id:Z})]}),(0,p.jsx)("div",{className:"table-responsive",children:(0,p.jsxs)(l.Z,{className:"mb-0",children:[(0,p.jsx)("thead",{children:(0,p.jsxs)("tr",{children:[(0,p.jsx)("th",{children:"Name"}),(0,p.jsx)("th",{children:"Is Active?"}),(0,p.jsx)("th",{children:"Actions"})]})}),(0,p.jsx)("tbody",{children:N.length>0?N.map((function(e){var n;return(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{children:e.ingredient_name}),(0,p.jsx)("td",{children:(0,p.jsx)(h.Z,{checked:null!==(n=S[e.ingredient_id])&&void 0!==n?n:e.is_active,onChange:function(n){return t=e.ingredient_id,s=n,E((function(e){return(0,r.Z)((0,r.Z)({},e),{},(0,i.Z)({},t,s))})),v((0,m.NT)(t,s)),void setTimeout((function(){T(""),v((0,m.En)(R))}),500);var t,s}})}),(0,p.jsxs)("td",{children:[(0,p.jsx)(f.ffH,{size:20,style:{cursor:"pointer",marginRight:"10px"}}),(0,p.jsx)(f.Xm5,{size:20,style:{cursor:"pointer",color:"red"},onClick:function(){return n=e.ingredient_id,void(window.confirm("Are you sure you want to delete this Ingredient?")&&(console.log("Ingredient ID: ",n),v((0,m.s7)(n)),T("Ingredient deleted")));var n}})]})]},e.ingredient_id)})):(0,p.jsx)("tr",{children:(0,p.jsx)("td",{colSpan:3,className:"text-center",children:"No ingredients found"})})})]})})]})})}},73201:function(e,n,t){var i=t(72791),r=function(e){return e&&"function"!==typeof e?function(n){e.current=n}:e};n.Z=function(e,n){return(0,i.useMemo)((function(){return function(e,n){var t=r(e),i=r(n);return function(e){t&&t(e),i&&i(e)}}(e,n)}),[e,n])}},9140:function(e,n,t){t.d(n,{Z:function(){return I}});var i=t(1413),r=t(45987),s=t(81694),o=t.n(s),a=t(72791),c=t(10162),d=t(66543),l=t(27472),u=t(80184),m=["bsPrefix","className","variant","as"],f=a.forwardRef((function(e,n){var t=e.bsPrefix,s=e.className,a=e.variant,d=e.as,l=void 0===d?"img":d,f=(0,r.Z)(e,m),h=(0,c.vE)(t,"card-img");return(0,u.jsx)(l,(0,i.Z)({ref:n,className:o()(a?"".concat(h,"-").concat(a):h,s)},f))}));f.displayName="CardImg";var h=f,v=t(96040),g=["bsPrefix","className","as"],x=a.forwardRef((function(e,n){var t=e.bsPrefix,s=e.className,d=e.as,l=void 0===d?"div":d,m=(0,r.Z)(e,g),f=(0,c.vE)(t,"card-header"),h=(0,a.useMemo)((function(){return{cardHeaderBsPrefix:f}}),[f]);return(0,u.jsx)(v.Z.Provider,{value:h,children:(0,u.jsx)(l,(0,i.Z)((0,i.Z)({ref:n},m),{},{className:o()(s,f)}))})}));x.displayName="CardHeader";var p=x,j=["bsPrefix","className","bg","text","border","body","children","as"],Z=(0,l.Z)("h5"),y=(0,l.Z)("h6"),b=(0,d.Z)("card-body"),C=(0,d.Z)("card-title",{Component:Z}),_=(0,d.Z)("card-subtitle",{Component:y}),N=(0,d.Z)("card-link",{Component:"a"}),k=(0,d.Z)("card-text",{Component:"p"}),w=(0,d.Z)("card-footer"),S=(0,d.Z)("card-img-overlay"),E=a.forwardRef((function(e,n){var t=e.bsPrefix,s=e.className,a=e.bg,d=e.text,l=e.border,m=e.body,f=e.children,h=e.as,v=void 0===h?"div":h,g=(0,r.Z)(e,j),x=(0,c.vE)(t,"card");return(0,u.jsx)(v,(0,i.Z)((0,i.Z)({ref:n},g),{},{className:o()(s,x,a&&"bg-".concat(a),d&&"text-".concat(d),l&&"border-".concat(l)),children:m?(0,u.jsx)(b,{children:f}):f}))}));E.displayName="Card",E.defaultProps={body:!1};var I=Object.assign(E,{Img:h,Title:C,Subtitle:_,Body:b,Link:N,Text:k,Header:p,Footer:w,ImgOverlay:S})},96040:function(e,n,t){var i=t(72791).createContext(null);i.displayName="CardHeaderContext",n.Z=i},62591:function(e,n,t){var i=t(1413),r=t(45987),s=t(81694),o=t.n(s),a=t(72791),c=t(10162),d=t(80184),l=["bsPrefix","className","striped","bordered","borderless","hover","size","variant","responsive"],u=a.forwardRef((function(e,n){var t=e.bsPrefix,s=e.className,a=e.striped,u=e.bordered,m=e.borderless,f=e.hover,h=e.size,v=e.variant,g=e.responsive,x=(0,r.Z)(e,l),p=(0,c.vE)(t,"table"),j=o()(s,p,v&&"".concat(p,"-").concat(v),h&&"".concat(p,"-").concat(h),a&&"".concat(p,"-striped"),u&&"".concat(p,"-bordered"),m&&"".concat(p,"-borderless"),f&&"".concat(p,"-hover")),Z=(0,d.jsx)("table",(0,i.Z)((0,i.Z)({},x),{},{className:j,ref:n}));if(g){var y="".concat(p,"-responsive");return"string"===typeof g&&(y="".concat(y,"-").concat(g)),(0,d.jsx)("div",{className:y,children:Z})}return Z}));n.Z=u},66543:function(e,n,t){t.d(n,{Z:function(){return f}});var i=t(1413),r=t(45987),s=t(81694),o=t.n(s),a=/-(.)/g;var c=t(72791),d=t(10162),l=t(80184),u=["className","bsPrefix","as"],m=function(e){return e[0].toUpperCase()+(n=e,n.replace(a,(function(e,n){return n.toUpperCase()}))).slice(1);var n};function f(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=n.displayName,s=void 0===t?m(e):t,a=n.Component,f=n.defaultProps,h=c.forwardRef((function(n,t){var s=n.className,c=n.bsPrefix,m=n.as,f=void 0===m?a||"div":m,h=(0,r.Z)(n,u),v=(0,d.vE)(c,e);return(0,l.jsx)(f,(0,i.Z)({ref:t,className:o()(s,v)},h))}));return h.defaultProps=f,h.displayName=s,h}},99944:function(){}}]);
//# sourceMappingURL=8938.938b5bc0.chunk.js.map