"use strict";(self.webpackChunkadminto_react=self.webpackChunkadminto_react||[]).push([[4662],{66252:function(e,t,n){n.d(t,{h:function(){return s}});var a=n(29439),i=n(72791);function s(e){var t=(0,i.useState)(0),n=(0,a.Z)(t,2),s=n[0],r=n[1];return{currentStepIndex:s,step:e[s],steps:e,isFirstStep:0===s,isLastStep:s===e.length-1,goTo:function(e){r(e)},next:function(){r((function(t){return t>=e.length-1?t:t+1}))},back:function(){r((function(e){return e<=0?e:e-1}))}}}},54662:function(e,t,n){n.r(t),n.d(t,{default:function(){return _}});var a=n(4942),i=n(1413),s=n(29439),r=n(72791),o=n(43360),l=n(51649),c=n(57689),d=n(77914),u=n(66252),g=n(47022),m=n(9140),f=n(2469),h=n(89743),v=n(2677),p=n(21827),Z=n(80184),x=function(e){var t=e.editCategory,n=(e.setEditCategory,e.handleSubmit,e.message),a=e.handleInputChange,i=e.handleFileChange,o=(0,r.useState)(null),l=(0,s.Z)(o,2),c=l[0],d=l[1],u=(0,r.useState)(null),x=(0,s.Z)(u,2),b=x[0],y=x[1],j=(0,r.useState)(null),_=(0,s.Z)(j,2),C=_[0],N=_[1];return(0,r.useEffect)((function(){t&&(t.logo_image instanceof File?d(URL.createObjectURL(t.logo_image)):"string"===typeof t.logo_image&&d(t.logo_image),t.swiggy_image instanceof File?y(URL.createObjectURL(t.swiggy_image)):"string"===typeof t.swiggy_image&&y(t.swiggy_image),t.banner_image instanceof File?N(URL.createObjectURL(t.banner_image)):"string"===typeof t.banner_image&&N(t.banner_image))}),[t]),t?(0,Z.jsx)(g.Z,{className:"register-item-container",children:(0,Z.jsxs)(m.Z,{className:"shadow-sm",children:[(0,Z.jsx)(m.Z.Header,{as:"h2",className:"text-center",children:"Edit Category"}),(0,Z.jsxs)(m.Z.Body,{children:[n&&(0,Z.jsx)(f.Z,{variant:"warning",children:n}),(0,Z.jsxs)(h.Z,{className:"mb-3",children:[(0,Z.jsx)(v.Z,{md:4,children:(0,Z.jsxs)(p.Z.Group,{children:[(0,Z.jsx)(p.Z.Label,{children:"Menu Image"}),(0,Z.jsx)(p.Z.Control,{type:"file",name:"logo_image",onChange:function(e){return i(e,"logo_image")}}),c&&(0,Z.jsx)("img",{src:c,alt:"Logo Preview",style:{width:"100px",height:"100px",objectFit:"cover",borderRadius:"5px"},className:"img-thumbnail mt-2",width:"100"})]})}),(0,Z.jsx)(v.Z,{md:4,children:(0,Z.jsxs)(p.Z.Group,{children:[(0,Z.jsx)(p.Z.Label,{children:"Swiggy Image"}),(0,Z.jsx)(p.Z.Control,{type:"file",name:"swiggy_image",onChange:function(e){return i(e,"swiggy_image")}}),b&&(0,Z.jsx)("img",{src:b,alt:"Swiggy Preview",style:{width:"100px",height:"100px",objectFit:"cover",borderRadius:"5px"},className:"img-thumbnail mt-2",width:"100"})]})}),(0,Z.jsx)(v.Z,{md:4,children:(0,Z.jsxs)(p.Z.Group,{children:[(0,Z.jsx)(p.Z.Label,{children:"Banner Image"}),(0,Z.jsx)(p.Z.Control,{type:"file",name:"banner_image",onChange:function(e){return i(e,"banner_image")}}),C&&(0,Z.jsx)("img",{src:C,alt:"Banner Preview",style:{width:"100px",height:"100px",objectFit:"cover",borderRadius:"5px"},className:"img-thumbnail mt-2",width:"100"})]})})]}),(0,Z.jsxs)(h.Z,{className:"mb-3",children:[(0,Z.jsx)(v.Z,{md:4,children:(0,Z.jsxs)(p.Z.Group,{children:[(0,Z.jsx)(p.Z.Label,{children:"Item Name (English)"}),(0,Z.jsx)(p.Z.Control,{type:"text",name:"english",required:!0,value:(null===t||void 0===t?void 0:t.category_names.english)||"",onChange:a})]})}),(0,Z.jsx)(v.Z,{md:4,children:(0,Z.jsxs)(p.Z.Group,{children:[(0,Z.jsx)(p.Z.Label,{children:"Item Name (Hindi)"}),(0,Z.jsx)(p.Z.Control,{type:"text",name:"hindi",required:!0,value:(null===t||void 0===t?void 0:t.category_names.hindi)||"",onChange:a})]})}),(0,Z.jsx)(v.Z,{md:4,children:(0,Z.jsxs)(p.Z.Group,{children:[(0,Z.jsx)(p.Z.Label,{children:"Item Name (Gujarati)"}),(0,Z.jsx)(p.Z.Control,{type:"text",name:"gujarati",required:!0,value:(null===t||void 0===t?void 0:t.category_names.gujarati)||"",onChange:a})]})})]})]})]})}):(0,Z.jsx)("p",{children:"Loading..."})},b=n(93433),y=n(1917),j=(n(99944),function(e){var t,n,a=e.editCategory,i=(e.setEditCategory,e.selectedOutlets),o=e.setSelectedOutlets,u=(0,c.TH)(),g=null===(t=u.state)||void 0===t?void 0:t.business_id,m=null===(n=u.state)||void 0===n?void 0:n.category_id,f=(0,l.Sc)(),h=f.dispatch,v=f.appSelector,p=v((function(e){return e.business.businesses||[]})),x=(0,r.useState)([]),j=(0,s.Z)(x,2),_=j[0],C=j[1],N=v((function(e){return e.category.categories||[]}));(0,r.useEffect)((function(){g&&(h((0,d.m$)(g)),h((0,y.ck)()))}),[h,g]),(0,r.useEffect)((function(){var e=p.find((function(e){return e.business_id===g}));e&&C(e.outlets)}),[p,g]);var S=N.find((function(e){return e.category_id===m}));(0,r.useEffect)((function(){if(S&&_.length>0){console.log("Category outlets:",S.outlets),console.log("All outlets:",_);var e=_.filter((function(e){return S.outlets.includes(e.outlet_id)}));console.log("Preselected outlets:",e),o(e.map((function(e){return e.outlet_id})))}}),[S,_]),(0,r.useEffect)((function(){null!==a&&void 0!==a&&a.outlets&&a.outlets.length>0&&(console.log("Updating from editCategory:",a.outlets),o(a.outlets.filter((function(e){return e.is_active})).map((function(e){return e.outlet_id}))))}),[a]);return(0,Z.jsxs)("div",{children:[(0,Z.jsx)("h3",{className:"title",children:"Select Outlets"}),_.length>0?(0,Z.jsx)("div",{className:"outlet-list",children:_.map((function(e){return(0,Z.jsxs)("div",{className:"outlet-item ".concat(i.filter((function(t){return(null===t||void 0===t?void 0:t.outlet_id)===(null===e||void 0===e?void 0:e.outlet_id)}))?"selected":""),onClick:function(){return t=e.outlet_id,void o((function(e){return e.includes(t)?e.filter((function(e){return e!==t})):[].concat((0,b.Z)(e),[t])}));var t},children:[(0,Z.jsx)("input",{type:"checkbox",checked:i.includes(e.outlet_id),className:"checkbox"}),(0,Z.jsx)("span",{className:"outlet-name",children:e.outlet_name})]},e.outlet_id)}))}):(0,Z.jsx)("p",{children:"No outlets available for this business."})]})}),_=function(e){e.show,e.onClose;var t,n,h=(0,l.Sc)(),v=h.dispatch,p=h.appSelector,b=(0,r.useState)(null),y=(0,s.Z)(b,2),_=(y[0],y[1],(0,r.useState)("")),C=(0,s.Z)(_,2),N=C[0],S=C[1],w=(0,r.useState)(""),E=(0,s.Z)(w,2),k=E[0],L=E[1],P=(0,r.useState)(null),R=(0,s.Z)(P,2),F=R[0],O=R[1],I=(0,c.TH)(),B=null===(t=I.state)||void 0===t?void 0:t.business_id,U=null===(n=I.state)||void 0===n?void 0:n.category_id,H=p((function(e){return e.category.categories||[]})),T=Boolean(F&&U),D=(0,r.useState)(!1),G=(0,s.Z)(D,2),A=G[0],q=G[1],z=(0,r.useState)(""),J=(0,s.Z)(z,2),M=J[0],V=(J[1],(0,c.s0)()),$=(0,r.useState)([]),K=(0,s.Z)($,2),Q=K[0],W=K[1],X=(0,r.useState)(null),Y=(0,s.Z)(X,2),ee=(Y[0],Y[1]),te=(0,r.useState)(null),ne=(0,s.Z)(te,2),ae=(ne[0],ne[1]),ie=(0,r.useState)(null),se=(0,s.Z)(ie,2),re=(se[0],se[1]);(0,r.useEffect)((function(){F&&console.log("Updated category:",F)}),[F]);(0,r.useEffect)((function(){if(U&&!F&&!A){console.log("Fetching categories from Redux:",H),0===H.length&&v((0,d.m$)(B));var e=H.find((function(e){return e.category_id===U}));if(e){if(console.log("Category to EDIT found:",e),O((function(t){var n=(0,i.Z)((0,i.Z)({},e),{},{business_id:B});return console.log("Setting editCategory:",n),n})),e.outlets){var t=e.outlets.filter((function(e){return e.is_active})).map((function(e){return e.id}));W(t)}}else S("Category to EDIT not found")}}),[U,H,B,v]);var oe=function(e){if(console.log("Submitting payload:",F),e.preventDefault(),console.log("Form submitted"),!F)return console.log("No Category Save"),void S("No Category Save");var t=Q.map((function(e){return null===e||void 0===e?void 0:e.outlet_id}));console.log("Selected Outlets: ",Q),console.log("Updated Category Before Dispatch:",t);var n=new FormData;n.append("category_name",JSON.stringify(F.category_names)),n.append("is_active",F.is_active.toString()),n.append("category_id",F.category_id),n.append("business_id",F.business_id),F.logo_image&&n.append("logo_image",F.logo_image),F.swiggy_image&&n.append("swiggy_image",F.swiggy_image),F.banner_image&&n.append("banner_image",F.banner_image),n.append("outlet_id",JSON.stringify(Q)),console.log("Dispatching API call with data:",Object.fromEntries(n.entries())),console.log("Final EditCategory:",F),v((0,d.yr)(n)),L("Category Updated successfully!"),V("/apps/manage-menu/",{state:{business_id:B}})},le=(0,u.h)([(0,Z.jsx)(x,{handleSubmit:oe,handleFileChange:function(e,t){var n,s=null===(n=e.target.files)||void 0===n?void 0:n[0];if(s){O((function(e){return e?(0,i.Z)((0,i.Z)({},e),{},(0,a.Z)({},t,s)):null}));var r=new FileReader;r.onloadend=function(){"logo_image"===t&&ee(r.result),"swiggy_image"===t&&ae(r.result),"banner_image"===t&&re(r.result)},r.readAsDataURL(s)}},editCategory:F,setEditCategory:function(e){console.log("Persisting editCategory across steps:",e)},message:N,handleInputChange:function(e){q(!0);var t=e.target,n=t.name,s=t.value;O((function(e){return e?(0,i.Z)((0,i.Z)({},e),{},{category_names:(0,i.Z)((0,i.Z)({},e.category_names),{},(0,a.Z)({},n,s))}):null}))}}),(0,Z.jsx)(j,{handleSubmit:oe,editCategory:F,setEditCategory:O,message:N,selectedOutlets:Q,setSelectedOutlets:W})]),ce=le.steps,de=le.currentStepIndex,ue=le.step,ge=le.isFirstStep,me=le.isLastStep,fe=le.back,he=le.next;return(0,Z.jsx)(g.Z,{className:"register-business-container",children:(0,Z.jsx)(m.Z,{className:"shadow-sm",children:(0,Z.jsxs)(m.Z.Body,{children:[(0,Z.jsxs)("form",{onSubmit:oe,children:[" ",(0,Z.jsxs)("div",{children:["Step ",de+1," of ",ce.length]}),ue,(0,Z.jsxs)("div",{className:"d-flex justify-content-center mt-4 gap-3",children:[!ge&&(0,Z.jsx)(o.Z,{variant:"secondary",type:"button",onClick:fe,className:"px-4 py-2",children:"Back"}),(0,Z.jsx)(o.Z,{variant:"primary",onClick:function(e){console.log("Before clicking next:",F),me?oe(e):he(),console.log("After clicking next:",F)},className:"px-4 py-2",children:me?T?"Update":"Finish":"Next"})]})]}),M&&(0,Z.jsx)(f.Z,{variant:"danger",className:"mt-3",children:M}),k&&(0,Z.jsx)(f.Z,{variant:"success",className:"mt-3",children:k})]})})})}},2469:function(e,t,n){var a=n(1413),i=n(45987),s=n(81694),r=n.n(s),o=n(72791),l=n(32592),c=n(39007),d=n(16445),u=n(10162),g=n(72709),m=n(80473),f=n(27472),h=n(66543),v=n(80184),p=["bsPrefix","show","closeLabel","closeVariant","className","children","variant","onClose","dismissible","transition"],Z=(0,f.Z)("h4");Z.displayName="DivStyledAsH4";var x=(0,h.Z)("alert-heading",{Component:Z}),b=(0,h.Z)("alert-link",{Component:d.Z}),y={variant:"primary",show:!0,transition:g.Z,closeLabel:"Close alert"},j=o.forwardRef((function(e,t){var n=(0,l.Ch)(e,{show:"onClose"}),s=n.bsPrefix,o=n.show,d=n.closeLabel,f=n.closeVariant,h=n.className,Z=n.children,x=n.variant,b=n.onClose,y=n.dismissible,j=n.transition,_=(0,i.Z)(n,p),C=(0,u.vE)(s,"alert"),N=(0,c.Z)((function(e){b&&b(!1,e)})),S=!0===j?g.Z:j,w=(0,v.jsxs)("div",(0,a.Z)((0,a.Z)({role:"alert"},S?void 0:_),{},{ref:t,className:r()(h,C,x&&"".concat(C,"-").concat(x),y&&"".concat(C,"-dismissible")),children:[y&&(0,v.jsx)(m.Z,{onClick:N,"aria-label":d,variant:f}),Z]}));return S?(0,v.jsx)(S,(0,a.Z)((0,a.Z)({unmountOnExit:!0},_),{},{ref:void 0,in:o,children:w})):o?w:null}));j.displayName="Alert",j.defaultProps=y,t.Z=Object.assign(j,{Link:b,Heading:x})},43360:function(e,t,n){var a=n(1413),i=n(29439),s=n(45987),r=n(81694),o=n.n(r),l=n(72791),c=n(15341),d=n(10162),u=n(80184),g=["as","bsPrefix","variant","size","active","className"],m=l.forwardRef((function(e,t){var n=e.as,r=e.bsPrefix,l=e.variant,m=e.size,f=e.active,h=e.className,v=(0,s.Z)(e,g),p=(0,d.vE)(r,"btn"),Z=(0,c.FT)((0,a.Z)({tagName:n},v)),x=(0,i.Z)(Z,2),b=x[0],y=x[1].tagName;return(0,u.jsx)(y,(0,a.Z)((0,a.Z)((0,a.Z)({},v),b),{},{ref:t,className:o()(h,p,f&&"active",l&&"".concat(p,"-").concat(l),m&&"".concat(p,"-").concat(m),v.href&&v.disabled&&"disabled")}))}));m.displayName="Button",m.defaultProps={variant:"primary",active:!1,disabled:!1},t.Z=m},9140:function(e,t,n){n.d(t,{Z:function(){return L}});var a=n(1413),i=n(45987),s=n(81694),r=n.n(s),o=n(72791),l=n(10162),c=n(66543),d=n(27472),u=n(80184),g=["bsPrefix","className","variant","as"],m=o.forwardRef((function(e,t){var n=e.bsPrefix,s=e.className,o=e.variant,c=e.as,d=void 0===c?"img":c,m=(0,i.Z)(e,g),f=(0,l.vE)(n,"card-img");return(0,u.jsx)(d,(0,a.Z)({ref:t,className:r()(o?"".concat(f,"-").concat(o):f,s)},m))}));m.displayName="CardImg";var f=m,h=n(96040),v=["bsPrefix","className","as"],p=o.forwardRef((function(e,t){var n=e.bsPrefix,s=e.className,c=e.as,d=void 0===c?"div":c,g=(0,i.Z)(e,v),m=(0,l.vE)(n,"card-header"),f=(0,o.useMemo)((function(){return{cardHeaderBsPrefix:m}}),[m]);return(0,u.jsx)(h.Z.Provider,{value:f,children:(0,u.jsx)(d,(0,a.Z)((0,a.Z)({ref:t},g),{},{className:r()(s,m)}))})}));p.displayName="CardHeader";var Z=p,x=["bsPrefix","className","bg","text","border","body","children","as"],b=(0,d.Z)("h5"),y=(0,d.Z)("h6"),j=(0,c.Z)("card-body"),_=(0,c.Z)("card-title",{Component:b}),C=(0,c.Z)("card-subtitle",{Component:y}),N=(0,c.Z)("card-link",{Component:"a"}),S=(0,c.Z)("card-text",{Component:"p"}),w=(0,c.Z)("card-footer"),E=(0,c.Z)("card-img-overlay"),k=o.forwardRef((function(e,t){var n=e.bsPrefix,s=e.className,o=e.bg,c=e.text,d=e.border,g=e.body,m=e.children,f=e.as,h=void 0===f?"div":f,v=(0,i.Z)(e,x),p=(0,l.vE)(n,"card");return(0,u.jsx)(h,(0,a.Z)((0,a.Z)({ref:t},v),{},{className:r()(s,p,o&&"bg-".concat(o),c&&"text-".concat(c),d&&"border-".concat(d)),children:g?(0,u.jsx)(j,{children:m}):m}))}));k.displayName="Card",k.defaultProps={body:!1};var L=Object.assign(k,{Img:f,Title:_,Subtitle:C,Body:j,Link:N,Text:S,Header:Z,Footer:w,ImgOverlay:E})},96040:function(e,t,n){var a=n(72791).createContext(null);a.displayName="CardHeaderContext",t.Z=a},80473:function(e,t,n){var a=n(1413),i=n(45987),s=n(52007),r=n.n(s),o=n(72791),l=n(81694),c=n.n(l),d=n(80184),u=["className","variant"],g={"aria-label":r().string,onClick:r().func,variant:r().oneOf(["white"])},m=o.forwardRef((function(e,t){var n=e.className,s=e.variant,r=(0,i.Z)(e,u);return(0,d.jsx)("button",(0,a.Z)({ref:t,type:"button",className:c()("btn-close",s&&"btn-close-".concat(s),n)},r))}));m.displayName="CloseButton",m.propTypes=g,m.defaultProps={"aria-label":"Close"},t.Z=m},72709:function(e,t,n){var a,i=n(1413),s=n(45987),r=n(4942),o=n(81694),l=n.n(o),c=n(72791),d=n(7324),u=n(71380),g=n(67202),m=n(85007),f=n(80184),h=["className","children","transitionClasses"],v=(a={},(0,r.Z)(a,d.d0,"show"),(0,r.Z)(a,d.cn,"show"),a),p=c.forwardRef((function(e,t){var n=e.className,a=e.children,r=e.transitionClasses,o=void 0===r?{}:r,d=(0,s.Z)(e,h),p=(0,c.useCallback)((function(e,t){(0,g.Z)(e),null==d.onEnter||d.onEnter(e,t)}),[d]);return(0,f.jsx)(m.Z,(0,i.Z)((0,i.Z)({ref:t,addEndListener:u.Z},d),{},{onEnter:p,childRef:a.ref,children:function(e,t){return c.cloneElement(a,(0,i.Z)((0,i.Z)({},t),{},{className:l()("fade",n,a.props.className,v[e],o[e])}))}}))}));p.defaultProps={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1},p.displayName="Fade",t.Z=p},99944:function(){}}]);
//# sourceMappingURL=4662.f455e025.chunk.js.map