"use strict";(self.webpackChunkadminto_react=self.webpackChunkadminto_react||[]).push([[1799],{31187:function(e,t,n){var a=n(29439),s=n(72791),r=n(21827),i=n(89743),l=n(2677),c=n(80184);t.Z=function(){var e=(0,s.useState)(!0),t=(0,a.Z)(e,2),n=t[0],o=t[1];return(0,c.jsx)(i.Z,{className:"mb-4",children:(0,c.jsx)(l.Z,{md:6,children:(0,c.jsxs)(r.Z.Group,{children:[(0,c.jsx)(r.Z.Label,{style:{fontSize:"1.5rem",fontWeight:"bold"},children:"Master Outlet"}),(0,c.jsxs)("div",{className:"d-flex align-items-center",children:[(0,c.jsx)(r.Z.Check,{type:"checkbox",checked:n,onChange:function(){return o(!0)},id:"master-checkbox",style:{transform:"scale(1.2)",marginRight:"8px"}}),(0,c.jsx)(r.Z.Label,{htmlFor:"master-checkbox",style:{fontSize:"1.3rem",marginBottom:"0"},children:"Master"})]})]})})})}},66252:function(e,t,n){n.d(t,{h:function(){return r}});var a=n(29439),s=n(72791);function r(e){var t=(0,s.useState)(0),n=(0,a.Z)(t,2),r=n[0],i=n[1];return{currentStepIndex:r,step:e[r],steps:e,isFirstStep:0===r,isLastStep:r===e.length-1,goTo:function(e){i(e)},next:function(){i((function(t){return t>=e.length-1?t:t+1}))},back:function(){i((function(e){return e<=0?e:e-1}))}}}},41799:function(e,t,n){n.r(t),n.d(t,{default:function(){return k}});var a=n(15861),s=n(4942),r=n(1413),i=n(29439),l=n(64687),c=n.n(l),o=n(72791),d=n(47022),u=n(9140),m=n(43360),g=n(2469),h=n(60364),f=n(57689),x=n(77914),Z=n(66252),p=n(21827),v=n(89743),b=n(2677),j=n(80184),y=function(e){var t=e.formData,n=(e.errorMsg,e.successMsg,e.handleChange),a=e.handleFileChange,s=e.logoPreview,r=e.swiggyPreview,i=e.bannerPreview,l=e.errors;return(0,j.jsx)(d.Z,{className:"register-item-container",children:(0,j.jsxs)(u.Z,{className:"shadow-sm",children:[(0,j.jsx)(u.Z.Header,{as:"h2",className:"text-center",children:"Register Category"}),(0,j.jsxs)(u.Z.Body,{children:[(0,j.jsxs)(v.Z,{className:"mb-3",children:[(0,j.jsxs)(b.Z,{md:4,children:[(0,j.jsxs)(p.Z.Group,{children:[(0,j.jsxs)(p.Z.Label,{children:["Menu Image ",(0,j.jsx)("span",{className:"text-danger",children:"*"})]}),(0,j.jsx)(p.Z.Control,{type:"file",name:"logo_image",onChange:a}),s&&(0,j.jsx)("img",{src:s,alt:"Menu Preview",width:"100"})]}),l.logo_image&&(0,j.jsx)("small",{className:"text-danger",children:l.logo_image})]}),(0,j.jsx)(b.Z,{md:4,children:(0,j.jsxs)(p.Z.Group,{children:[(0,j.jsx)(p.Z.Label,{children:"Swiggy Image"}),(0,j.jsx)(p.Z.Control,{type:"file",name:"swiggy_image",onChange:a}),r&&(0,j.jsx)("img",{src:r,alt:"Swiggy Preview",width:"100"})]})}),(0,j.jsx)(b.Z,{md:4,children:(0,j.jsxs)(p.Z.Group,{children:[(0,j.jsx)(p.Z.Label,{children:"Banner Image"}),(0,j.jsx)(p.Z.Control,{type:"file",name:"banner_image",onChange:a}),i&&(0,j.jsx)("img",{src:i,alt:"Banner Preview",width:"100"})]})})]}),(0,j.jsxs)(v.Z,{className:"mb-3",children:[(0,j.jsx)(b.Z,{md:4,children:(0,j.jsxs)(p.Z.Group,{children:[(0,j.jsxs)(p.Z.Label,{children:["Item Name (English) ",(0,j.jsx)("span",{className:"text-danger",children:"*"})]}),(0,j.jsx)(p.Z.Control,{type:"text",name:"category_name.english",required:!0,value:t.category_name.english,onChange:n,placeholder:"Enter Item Name in English"}),l.category_name&&(0,j.jsx)("small",{className:"text-danger",children:l.category_name})]})}),(0,j.jsx)(b.Z,{md:4,children:(0,j.jsxs)(p.Z.Group,{children:[(0,j.jsx)(p.Z.Label,{children:"Item Name (Hindi)"}),(0,j.jsx)(p.Z.Control,{type:"text",name:"category_name.hindi",value:t.category_name.hindi,onChange:n,placeholder:"Enter Item Name in Hindi"})]})}),(0,j.jsx)(b.Z,{md:4,children:(0,j.jsxs)(p.Z.Group,{children:[(0,j.jsx)(p.Z.Label,{children:"Item Name (Gujarati)"}),(0,j.jsx)(p.Z.Control,{type:"text",name:"category_name.gujarati",value:t.category_name.gujarati,onChange:n,placeholder:"Enter Item Name in Gujarati"})]})})]})]})]})})},_=n(93433),N=n(51649),C=n(1917),w=n(31187),S=function(e){e.formData;var t,n=e.setSelectedOutlets,a=e.selectedOutlets,s=null===(t=(0,f.TH)().state)||void 0===t?void 0:t.business_id,l=(0,N.Sc)(),c=l.dispatch,g=(0,l.appSelector)((function(e){return e.business.businesses||[]})),h=(0,o.useState)(!0),x=(0,i.Z)(h,2),Z=x[0],y=x[1];(0,o.useEffect)((function(){s&&c((0,C.ck)())}),[c,s]),(0,o.useEffect)((function(){g.length>0&&y(!1)}),[g]);var S=g.find((function(e){return e.business_id===s}));return(0,j.jsx)(d.Z,{className:"register-item-container mt-4",children:(0,j.jsxs)(u.Z,{className:"shadow-sm",children:[(0,j.jsx)(u.Z.Header,{as:"h2",className:"text-center",children:"Select Outlets"}),(0,j.jsxs)(u.Z.Body,{children:[(0,j.jsx)(w.Z,{}),(0,j.jsxs)(v.Z,{className:"mb-4 d-flex align-items-center",children:[(0,j.jsx)(b.Z,{md:"auto",children:(0,j.jsx)(p.Z.Label,{style:{fontSize:"1.5rem",fontWeight:"bold"},children:"Outlet Name"})}),(0,j.jsx)(b.Z,{md:"auto",children:(0,j.jsx)(m.Z,{onClick:function(e){if(e.preventDefault(),S){var t=S.outlets.every((function(e){return a.includes(e.outlet_id)})),s=t?[]:S.outlets.map((function(e){return e.outlet_id}));n(s),S.outlets=S.outlets.map((function(e){return(0,r.Z)((0,r.Z)({},e),{},{is_active:!t})}))}},className:"btn btn-primary btn-sm ms-3",children:S&&S.outlets.length>0&&a.length===S.outlets.length?"Deselect All":"Select All"})})]}),Z?(0,j.jsx)("p",{className:"text-muted text-center",children:"Loading..."}):S?S.outlets.length>0?(0,j.jsx)(v.Z,{children:S.outlets.map((function(e){var t=a.includes(e.outlet_id);return(0,j.jsx)(b.Z,{md:12,className:"mb-3 shadow-sm",children:(0,j.jsxs)("div",{className:"d-flex align-items-center p-2",style:{cursor:"pointer",fontSize:"1.2rem"},onClick:function(){return function(e){var t=a.includes(e.outlet_id);n((function(n){return t?n.filter((function(t){return t!==e.outlet_id})):[].concat((0,_.Z)(n),[e.outlet_id])})),S&&(S.outlets=S.outlets.map((function(t){return t.outlet_id===e.outlet_id?(0,r.Z)((0,r.Z)({},t),{},{is_active:!t.is_active}):t})))}(e)},children:[(0,j.jsx)(p.Z.Check,{type:"checkbox",checked:t,readOnly:!0,id:"outlet-checkbox-".concat(e.outlet_id),className:"me-3",style:{transform:"scale(1.5)"}}),(0,j.jsx)("label",{htmlFor:"outlet-checkbox-".concat(e.outlet_id),style:{cursor:"pointer"},children:e.outlet_name}),(0,j.jsx)("span",{className:"ms-auto status ".concat(e.is_active?"text-success":"text-danger")})]})},e.outlet_id)}))}):(0,j.jsx)("p",{className:"text-muted text-center",children:"No outlets available for this business."}):(0,j.jsx)("p",{className:"text-muted text-center",children:"Business not found."})]})]})})},k=function(e){e.show,e.onClose;var t,n=(0,h.I0)(),l=null===(t=(0,f.TH)().state)||void 0===t?void 0:t.business_id,p=(0,h.v9)((function(e){var t,n;return null!==(t=null===(n=e.outlet)||void 0===n?void 0:n.outlets)&&void 0!==t?t:[]})).filter((function(e){return e.business_id===l})).map((function(e){return e.outlet_id})),v=(0,o.useState)({category_name:{hindi:"",english:"",gujarati:""},business_id:l||"",outlet_id:p,logo_image:null,swiggy_image:null,banner_image:null,is_active:!1,selectedOutlets:[]}),b=(0,i.Z)(v,2),_=b[0],N=b[1],C=(0,o.useState)(null),w=(0,i.Z)(C,2),k=w[0],P=w[1],O=(0,o.useState)(null),E=(0,i.Z)(O,2),L=E[0],I=E[1],B=(0,o.useState)(null),H=(0,i.Z)(B,2),R=H[0],D=H[1],F=(0,o.useState)(""),G=(0,i.Z)(F,2),M=G[0],T=G[1],z=(0,f.s0)(),A=(0,o.useState)({}),q=(0,i.Z)(A,2),W=q[0],J=q[1],U=(0,o.useState)([]),V=(0,i.Z)(U,2),$=V[0],K=V[1],Q=(0,o.useState)(""),X=(0,i.Z)(Q,2),Y=X[0],ee=X[1],te=function(){var e=(0,a.Z)(c().mark((function e(t){var a,s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=$.length>0?$:[],(s=new FormData).append("category_name",JSON.stringify(_.category_name)),s.append("outlet_id",JSON.stringify(a)),s.append("business_id",_.business_id),s.append("is_active",(a.length>0).toString()),_.logo_image&&s.append("logo_image",_.logo_image),_.swiggy_image&&s.append("swiggy_image",_.swiggy_image),_.banner_image&&s.append("banner_image",_.banner_image),e.prev=10,console.log("Dispatching API request with:",Object.fromEntries(s.entries())),e.next=14,n((0,x.cO)(s));case 14:console.log("API request dispatched!"),ee("Category registration successful"),setTimeout((function(){z("/apps/manage-menu"),n((0,x.m$)(l))}),2e3),T(""),N({category_name:{hindi:"",english:"",gujarati:""},outlet_id:[],business_id:"",logo_image:null,swiggy_image:null,banner_image:null,is_active:!1,selectedOutlets:[]}),K([]),P(null),I(null),D(null),e.next=29;break;case 25:e.prev=25,e.t0=e.catch(10),T("Error registering Category, please try again."),ee("");case 29:case"end":return e.stop()}}),e,null,[[10,25]])})));return function(t){return e.apply(this,arguments)}}(),ne=(0,Z.h)([(0,j.jsx)(y,{formData:_,errorMsg:M,successMsg:Y,handleChange:function(e){var t=e.target,n=t.name,a=t.value;t.type,t.multiple;N((function(e){if(n.startsWith("category_name.")){var t=n.split(".")[1];return(0,r.Z)((0,r.Z)({},e),{},{category_name:(0,r.Z)((0,r.Z)({},e.category_name),{},(0,s.Z)({},t,a))})}return(0,r.Z)((0,r.Z)({},e),{},(0,s.Z)({},n,a))}))},handleFileChange:function(e){var t,n=null===(t=e.target.files)||void 0===t?void 0:t[0],a=e.target.name;if(n){var i=URL.createObjectURL(n);"logo_image"===a&&P(i),"swiggy_image"===a&&I(i),"banner_image"===a&&D(i),N((function(e){return(0,r.Z)((0,r.Z)({},e),{},(0,s.Z)({},a,n))}))}},handleSubmit:te,logoPreview:k,swiggyPreview:L,bannerPreview:R,errors:W}),(0,j.jsx)(S,{selectedOutlets:$,setSelectedOutlets:K,formData:_,handleSubmit:te})]),ae=ne.steps,se=ne.currentStepIndex,re=ne.step,ie=ne.isFirstStep,le=ne.isLastStep,ce=ne.back,oe=ne.next;return(0,j.jsx)(d.Z,{className:"register-business-container",children:(0,j.jsx)(u.Z,{className:"shadow-sm",children:(0,j.jsxs)(u.Z.Body,{children:[(0,j.jsxs)("form",{onSubmit:te,children:[" ",(0,j.jsxs)("div",{children:["Step ",se+1," of ",ae.length]}),re,(0,j.jsxs)("div",{className:"d-flex justify-content-center mt-4 gap-3",children:[!ie&&(0,j.jsx)(m.Z,{variant:"secondary",type:"button",onClick:ce,className:"px-4 py-2",children:"Back"}),(0,j.jsx)(m.Z,{variant:"primary",onClick:function(e){(function(){var e={};return 0===se&&(_.category_name.english.trim()||(e.category_name="Category Name is required!"),_.logo_image&&""!==_.logo_image.name.trim()||(e.logo_image="Logo Image is required!")),J(e),0===Object.keys(e).length})()&&(le?te(e):oe())},className:"px-4 py-2",children:le?"Submit":"Next"})]})]}),M&&(0,j.jsx)(g.Z,{variant:"danger",className:"mt-3",children:M}),Y&&(0,j.jsx)(g.Z,{variant:"success",className:"mt-3",children:Y})]})})})}},2469:function(e,t,n){var a=n(1413),s=n(45987),r=n(81694),i=n.n(r),l=n(72791),c=n(32592),o=n(39007),d=n(16445),u=n(10162),m=n(72709),g=n(80473),h=n(27472),f=n(66543),x=n(80184),Z=["bsPrefix","show","closeLabel","closeVariant","className","children","variant","onClose","dismissible","transition"],p=(0,h.Z)("h4");p.displayName="DivStyledAsH4";var v=(0,f.Z)("alert-heading",{Component:p}),b=(0,f.Z)("alert-link",{Component:d.Z}),j={variant:"primary",show:!0,transition:m.Z,closeLabel:"Close alert"},y=l.forwardRef((function(e,t){var n=(0,c.Ch)(e,{show:"onClose"}),r=n.bsPrefix,l=n.show,d=n.closeLabel,h=n.closeVariant,f=n.className,p=n.children,v=n.variant,b=n.onClose,j=n.dismissible,y=n.transition,_=(0,s.Z)(n,Z),N=(0,u.vE)(r,"alert"),C=(0,o.Z)((function(e){b&&b(!1,e)})),w=!0===y?m.Z:y,S=(0,x.jsxs)("div",(0,a.Z)((0,a.Z)({role:"alert"},w?void 0:_),{},{ref:t,className:i()(f,N,v&&"".concat(N,"-").concat(v),j&&"".concat(N,"-dismissible")),children:[j&&(0,x.jsx)(g.Z,{onClick:C,"aria-label":d,variant:h}),p]}));return w?(0,x.jsx)(w,(0,a.Z)((0,a.Z)({unmountOnExit:!0},_),{},{ref:void 0,in:l,children:S})):l?S:null}));y.displayName="Alert",y.defaultProps=j,t.Z=Object.assign(y,{Link:b,Heading:v})},43360:function(e,t,n){var a=n(1413),s=n(29439),r=n(45987),i=n(81694),l=n.n(i),c=n(72791),o=n(15341),d=n(10162),u=n(80184),m=["as","bsPrefix","variant","size","active","className"],g=c.forwardRef((function(e,t){var n=e.as,i=e.bsPrefix,c=e.variant,g=e.size,h=e.active,f=e.className,x=(0,r.Z)(e,m),Z=(0,d.vE)(i,"btn"),p=(0,o.FT)((0,a.Z)({tagName:n},x)),v=(0,s.Z)(p,2),b=v[0],j=v[1].tagName;return(0,u.jsx)(j,(0,a.Z)((0,a.Z)((0,a.Z)({},x),b),{},{ref:t,className:l()(f,Z,h&&"active",c&&"".concat(Z,"-").concat(c),g&&"".concat(Z,"-").concat(g),x.href&&x.disabled&&"disabled")}))}));g.displayName="Button",g.defaultProps={variant:"primary",active:!1,disabled:!1},t.Z=g},9140:function(e,t,n){n.d(t,{Z:function(){return O}});var a=n(1413),s=n(45987),r=n(81694),i=n.n(r),l=n(72791),c=n(10162),o=n(66543),d=n(27472),u=n(80184),m=["bsPrefix","className","variant","as"],g=l.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,l=e.variant,o=e.as,d=void 0===o?"img":o,g=(0,s.Z)(e,m),h=(0,c.vE)(n,"card-img");return(0,u.jsx)(d,(0,a.Z)({ref:t,className:i()(l?"".concat(h,"-").concat(l):h,r)},g))}));g.displayName="CardImg";var h=g,f=n(96040),x=["bsPrefix","className","as"],Z=l.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,o=e.as,d=void 0===o?"div":o,m=(0,s.Z)(e,x),g=(0,c.vE)(n,"card-header"),h=(0,l.useMemo)((function(){return{cardHeaderBsPrefix:g}}),[g]);return(0,u.jsx)(f.Z.Provider,{value:h,children:(0,u.jsx)(d,(0,a.Z)((0,a.Z)({ref:t},m),{},{className:i()(r,g)}))})}));Z.displayName="CardHeader";var p=Z,v=["bsPrefix","className","bg","text","border","body","children","as"],b=(0,d.Z)("h5"),j=(0,d.Z)("h6"),y=(0,o.Z)("card-body"),_=(0,o.Z)("card-title",{Component:b}),N=(0,o.Z)("card-subtitle",{Component:j}),C=(0,o.Z)("card-link",{Component:"a"}),w=(0,o.Z)("card-text",{Component:"p"}),S=(0,o.Z)("card-footer"),k=(0,o.Z)("card-img-overlay"),P=l.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,l=e.bg,o=e.text,d=e.border,m=e.body,g=e.children,h=e.as,f=void 0===h?"div":h,x=(0,s.Z)(e,v),Z=(0,c.vE)(n,"card");return(0,u.jsx)(f,(0,a.Z)((0,a.Z)({ref:t},x),{},{className:i()(r,Z,l&&"bg-".concat(l),o&&"text-".concat(o),d&&"border-".concat(d)),children:m?(0,u.jsx)(y,{children:g}):g}))}));P.displayName="Card",P.defaultProps={body:!1};var O=Object.assign(P,{Img:h,Title:_,Subtitle:N,Body:y,Link:C,Text:w,Header:p,Footer:S,ImgOverlay:k})},96040:function(e,t,n){var a=n(72791).createContext(null);a.displayName="CardHeaderContext",t.Z=a},80473:function(e,t,n){var a=n(1413),s=n(45987),r=n(52007),i=n.n(r),l=n(72791),c=n(81694),o=n.n(c),d=n(80184),u=["className","variant"],m={"aria-label":i().string,onClick:i().func,variant:i().oneOf(["white"])},g=l.forwardRef((function(e,t){var n=e.className,r=e.variant,i=(0,s.Z)(e,u);return(0,d.jsx)("button",(0,a.Z)({ref:t,type:"button",className:o()("btn-close",r&&"btn-close-".concat(r),n)},i))}));g.displayName="CloseButton",g.propTypes=m,g.defaultProps={"aria-label":"Close"},t.Z=g},72709:function(e,t,n){var a,s=n(1413),r=n(45987),i=n(4942),l=n(81694),c=n.n(l),o=n(72791),d=n(7324),u=n(71380),m=n(67202),g=n(85007),h=n(80184),f=["className","children","transitionClasses"],x=(a={},(0,i.Z)(a,d.d0,"show"),(0,i.Z)(a,d.cn,"show"),a),Z=o.forwardRef((function(e,t){var n=e.className,a=e.children,i=e.transitionClasses,l=void 0===i?{}:i,d=(0,r.Z)(e,f),Z=(0,o.useCallback)((function(e,t){(0,m.Z)(e),null==d.onEnter||d.onEnter(e,t)}),[d]);return(0,h.jsx)(g.Z,(0,s.Z)((0,s.Z)({ref:t,addEndListener:u.Z},d),{},{onEnter:Z,childRef:a.ref,children:function(e,t){return o.cloneElement(a,(0,s.Z)((0,s.Z)({},t),{},{className:c()("fade",n,a.props.className,x[e],l[e])}))}}))}));Z.defaultProps={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1},Z.displayName="Fade",t.Z=Z}}]);
//# sourceMappingURL=1799.932f40ef.chunk.js.map